(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{209:function(e,t,a){e.exports=a(371)},214:function(e,t,a){},371:function(e,t,a){"use strict";a.r(t);var o=a(0),r=a.n(o),n=a(28),c=a.n(n),i=(a(214),a(21)),l=a(22),s=a(25),u=a(23),p=a(26),m=a(15),f=a(77),d=a.n(f),C=a(78),h=a.n(C),v=a(19),g=a.n(v),E=a(20),y=a.n(E),b=a(49),O=a(76),T=a.n(O),j=a(35),S=a.n(j),w=a(32),_=a.n(w),A=a(37),I=a.n(A),D=a(38),k=a.n(D),U=a(29),F=a(148),R=a.n(F),x=a(372),N=a(24),M=function(e){function t(){var e,a;Object(i.a)(this,t);for(var o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={top:!1,left:!1,bottom:!1,right:!1},a.toggleDrawer=function(e,t){return function(){a.setState(Object(b.a)({},e,t))}},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=r.a.createElement("div",{className:e.list},r.a.createElement(S.a,null,r.a.createElement(_.a,{button:!0,component:x.a,to:"/"},r.a.createElement(I.a,null,r.a.createElement(U.a,null,"search")),r.a.createElement(k.a,{primary:"Court Search"})),r.a.createElement(_.a,{button:!0,component:x.a,to:"/favourites"},r.a.createElement(I.a,null,r.a.createElement(U.a,null,"favorite")),r.a.createElement(k.a,{primary:"Favourites"}))));return r.a.createElement(o.Fragment,null,r.a.createElement(U.b,{className:e.menuButton,color:"inherit","aria-label":"Menu",onClick:this.toggleDrawer("left",!0)},r.a.createElement(R.a,null)),r.a.createElement(T.a,{open:this.state.left,onClose:this.toggleDrawer("left",!1)},r.a.createElement("div",{tabIndex:0,role:"button",onClick:this.toggleDrawer("left",!1),onKeyDown:this.toggleDrawer("left",!1)},t)))}}]),t}(r.a.Component),L=Object(N.b)(function(e){return{courts:e.courts,activeCourt:e.courts.activeCourt,filteredCourts:e.courts.filteredCourts}})(Object(m.withStyles)({list:{width:250},fullList:{width:"auto"},menuButton:{marginLeft:-12,marginRight:20}})(M));var B=Object(m.withStyles)({root:{flexGrow:1},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20}})(function(e){var t=e.classes;return r.a.createElement("div",{className:t.root},r.a.createElement(d.a,{position:"static"},r.a.createElement(h.a,null,r.a.createElement(L,null),r.a.createElement(g.a,{variant:"h6",color:"inherit",className:t.grow},"Find Local Tennis Courts"),r.a.createElement(y.a,{color:"inherit",href:"http://github.com/reaiiybigshrimp/tennis_court_finder"},"Source Code(GitHub)"))))}),P=a(374),V=a(373),W=a(52),z=a.n(W),G=a(46),J=a.n(G),H=a(48),K=a.n(H),Z=a(47),$=a.n(Z),q=a(62),Q=a.n(q),X=a(16),Y=a.n(X),ee={minWidth:"350px",maxWidth:"400px",position:"absolute",zIndex:500,bottom:"25px",left:"1px"},te={color:"#ffffff"};var ae=Object(N.b)(function(e){return{courts:e.courts,activeCourt:e.activeCourt}},function(e){return{setActiveCourt:function(t){e({type:"SET_ACTIVE_COURT",court:t})},addCourts:function(t){e({type:"ADD_COURTS",courts:t})}}})(function(e){var t,a,o,n=e.courts,c=e.panToCourtPosition;return console.log(n.activeCourt),null!=n.activeCourt&&(console.log(n.activeCourt.properties.surfaces),t=n.activeCourt.properties.surfaces[0],o="http://maps.google.com/maps?daddr="+(a=n.activeCourt.geometry.coordinates)[0]+","+a[1]+"&amp;ll="),r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a,{style:ee},r.a.createElement($.a,null,r.a.createElement(Y.a,{container:!0,spacing:0,direction:"column",alignItems:"flex-start",justify:"center"},r.a.createElement(Y.a,{item:!0},r.a.createElement(U.c,{variant:"h4",color:"textSecondary",gutterBottom:!0},null!=n.activeCourt?console.log(n.activeCourt.properties.name):console.log("Nothing"),null!=n.activeCourt?n.activeCourt.properties.name:"Select a court"))),r.a.createElement(Y.a,{container:!0,spacing:8,direction:"row",alignItems:"center",justify:"flex-start"},r.a.createElement(Y.a,{item:!0},r.a.createElement(U.c,{color:"textSecondary",gutterBottom:!0},null!=n.activeCourt?"Number of courts: "+n.activeCourt.properties.numOfCourts:"")),r.a.createElement(Y.a,{item:!0},r.a.createElement(U.c,{color:"textSecondary",gutterBottom:!0},null!=n.activeCourt?"Surface(s): "+t:""))),r.a.createElement(U.c,{color:"textSecondary",gutterBottom:!0},null!=n.activeCourt?n.activeCourt.properties.description:"")),r.a.createElement(K.a,null,r.a.createElement(y.a,{variant:"contained",color:"primary",href:o,style:te},r.a.createElement(U.c,{variant:"button",color:"inherit"},"Get Directions"),r.a.createElement(Q.a,null,"chevron_right")),r.a.createElement(y.a,{variant:"contained",color:"secondary",onClick:c},r.a.createElement(Q.a,{onClick:c},"location_searching")))))}),oe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).componentWillMount=function(){null==a.props.activeCourt&&(window.location.href="/")},a.componentDidMount=function(){a.setState({map:z.a.map("map").setView([53.645792,-1.785035],16)},function(){z.a.tileLayer("https://{s}.tile.openstreetmap.se/hydda/full/{z}/{x}/{y}.png",{attribution:'Tiles courtesy of <a href="http://openstreetmap.se/" target="_blank">OpenStreetMap Sweden</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',maxZoom:18}).addTo(a.state.map),null!=a.props.activeCourt&&a.state.map.setView(a.props.activeCourt.geometry.coordinates)}),navigator.geolocation.getCurrentPosition(function(e){console.log(e)},function(){console.log("No user location found.")})},a.addMarkers=function(){var e=z.a.icon({iconUrl:"/images/tennis_marker_01.svg",iconSize:[38,51],iconAnchor:[15,35],popupAnchor:[-3,-76]});a.props.filteredCourts.length<1&&null!=a.props.activeCourt&&z.a.marker(a.props.activeCourt.geometry.coordinates,{icon:e}).addTo(a.state.map),a.props.filteredCourts.forEach(function(t){var o;o=t,z.a.marker(t.geometry.coordinates,{icon:e}).addTo(a.state.map).addEventListener("click",function(e){a.props.setActiveCourt(o)},!1)})},a.panToCourtPosition=function(){null!=a.props.activeCourt&&a.state.map.setView(a.props.activeCourt.geometry.coordinates)},a.state={test:null},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(){this.addMarkers();var e={activeCourt:this.props.activeCourt};window.history.pushState(e,null,"/map")}},{key:"render",value:function(){return console.log(this.props),console.log(this.props.activeCourt),console.log(window.history.state),r.a.createElement("div",{className:"map-container"},r.a.createElement("div",{id:"map"},r.a.createElement(ae,{panToCourtPosition:this.panToCourtPosition,court:this.state.activeCourt})))}}]),t}(r.a.Component),re=Object(N.b)(function(e){return{courts:e.courts.courts,activeCourt:e.courts.activeCourt,filteredCourts:e.courts.filteredCourts}},function(e){return{setActiveCourt:function(t){e({type:"SET_ACTIVE_COURT",court:t})},addCourts:function(t){e({type:"ADD_COURTS",courts:t})}}})(oe),ne=a(51),ce=a.n(ne),ie=a(79),le=a.n(ie),se=a(50),ue=a.n(se),pe=a(60),me=a.n(pe),fe=a(61),de=a.n(fe),Ce=a(80),he=a.n(Ce),ve=a(81),ge=a.n(ve),Ee=a(82),ye=a.n(Ee),be=[{value:5,label:"< 5"},{value:10,label:"< 10"},{value:20,label:"< 20"},{value:50,label:"< 50"},{value:1e3,label:"Any"}],Oe=function(e){function t(){var e,a;Object(i.a)(this,t);for(var o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={courtCost:"free",courtDistance:1e3},a.handleChange=function(e){a.setState({courtCost:e.target.value},function(){a.props.updateFilters(a.state)})},a.handleDistanceChange=function(e){return function(t){a.setState(Object(b.a)({},e,t.target.value),function(){a.props.updateFilters(a.state)})}},a.calculateDistance=function(e,t,a,o,r){if(e===a&&t===o)return 0;var n=Math.PI*e/180,c=Math.PI*a/180,i=t-o,l=Math.PI*i/180,s=Math.sin(n)*Math.sin(c)+Math.cos(n)*Math.cos(c)*Math.cos(l);return s>1&&(s=1),s=60*(s=180*(s=Math.acos(s))/Math.PI)*1.1515,"K"===r&&(s*=1.609344),"N"===r&&(s*=.8684),s},a.applyFilters=function(){var e=a.props,t=e.courtCost,o=e.courtDistance;navigator.geolocation.getCurrentPosition(function(e){a.props.setUserLocation(e),console.log(e),fetch("./tennis_courts.json",{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(function(e){return e.json()}).then(function(r){console.log(r),a.props.addCourts(r);var n=[];(n=r.filter(function(e){var a=!1;return!0===e.properties.freeAccess&&"free"===t&&(a=!0),!1===e.properties.freeAccess&&"premium"===t&&(a=!0),!1===e.properties.freeAccess&&"all"===t&&(a=!0),!0===e.properties.freeAccess&&"all"===t&&(a=!0),!0===a})).map(function(t){return console.log(e.coords.latitude),console.log(e.coords.longitude),console.log(t.distanceToUser=a.calculateDistance(e.coords.latitude,e.coords.longitude,t.geometry.coordinates[0],t.geometry.coordinates[1])),t}),(n=n.filter(function(e){var t=!1;return e.distanceToUser<=o&&(t=!0),!0===t})).sort(function(e,t){return parseFloat(e.distanceToUser)-parseFloat(t.distanceToUser)}),console.log("Filtered list: "),console.log(n),n.length>10&&(n=n.slice(0,10)),a.props.filterCourts(n)}).catch(function(e){return console.error(e)})},function(){console.log("No user location found."),alert("Error: No location found")})},a.componentDidMount=function(){localStorage.setItem("test","Data")},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.root},r.a.createElement(me.a,{component:"fieldset",className:e.formControl},r.a.createElement(de.a,{component:"legend"},"Court Cost"),r.a.createElement(le.a,{"aria-label":"Court Cost",name:"Court Cost",className:e.group,value:this.props.courtCost,onChange:this.handleChange},r.a.createElement(ue.a,{value:"free",control:r.a.createElement(ce.a,null),label:"Free Courts"}),r.a.createElement(ue.a,{value:"premium",control:r.a.createElement(ce.a,null),label:"Premium Courts"}),r.a.createElement(ue.a,{value:"all",control:r.a.createElement(ce.a,null),label:"All"})),r.a.createElement(he.a,{select:!0,className:e.padBottom,variant:"outlined",label:"Distance",value:this.props.courtDistance,onChange:this.handleDistanceChange("courtDistance"),InputProps:{startAdornment:r.a.createElement(ge.a,{position:"start"},"Miles")}},be.map(function(e){return r.a.createElement(ye.a,{key:e.value,value:e.value},e.label)})),r.a.createElement(y.a,{variant:"contained",color:"primary",fullWidth:!0,onClick:this.applyFilters},"Apply Filters")))}}]),t}(r.a.Component),Te=Object(N.b)(function(e){return{courtCost:e.formFilters.courtCost,courtDistance:e.formFilters.courtDistance,courts:e.courts.courts}},function(e){return{updateFilters:function(t){e({type:"UPDATE_FILTERS",payload:t})},addCourts:function(t){e({type:"ADD_COURTS",courts:t})},filterCourts:function(t){e({type:"FILTER_COURTS",payload:t})},setUserLocation:function(t){e({type:"SET_USER_LOCATION",payload:t})}}})(Object(m.withStyles)(function(e){return{root:{display:"flex"},formControl:{margin:3*e.spacing.unit},group:{margin:"".concat(e.spacing.unit,"px 0")},padBottom:{marginBottom:"5px"}}})(Oe)),je=a(84),Se=a.n(je),we=a(85),_e=a.n(we),Ae=a(83),Ie=a.n(Ae),De=a(36),ke=a.n(De),Ue=a(149),Fe=a.n(Ue),Re=function(e){function t(){var e,a;Object(i.a)(this,t);for(var o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},a.handleClick=function(){a.setState({open:!0})},a.handleClose=function(e,t){"clickaway"!==t&&a.setState({open:!1})},a.addToFavourites=function(e){var t=[];localStorage.getItem("favouriteCourts")&&(t=JSON.parse(localStorage.getItem("favouriteCourts")),console.log(localStorage.getItem("favouriteCourts"))),t.push(e);var a=t.filter(function(e,t,a){return a.findIndex(function(t){return t.properties.id===e.properties.id&&t.properties.id===e.properties.id})===t});localStorage.setItem("favouriteCourts",JSON.stringify(a)),console.log(localStorage.getItem("favouriteCourts"))},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("div",null,r.a.createElement(y.a,{size:"small",color:"primary",onClick:function(){e.addToFavourites(e.props.court),e.handleClick()}},"Favourite"),r.a.createElement(Ie.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.open,autoHideDuration:6e3,onClose:this.handleClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},this.props.court.properties.name," added to favourites!"),action:[r.a.createElement(ke.a,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:this.handleClose},r.a.createElement(Fe.a,null))]}))}}]),t}(r.a.Component),xe=Object(m.withStyles)(function(e){return{close:{padding:e.spacing.unit/2}}})(Re),Ne=Object(N.b)(function(e){return{courts:e.courts,filteredCourts:e.courts.filteredCourts,activeCourt:e.courts.activeCourt}},function(e){return{setActiveCourt:function(t){e({type:"SET_ACTIVE_COURT",court:t})}}})(Object(m.withStyles)({card:{maxWidth:345,margin:"auto",marginBottom:"10px"},media:{height:140},panel:{height:175}})(function(e){var t,a=e.classes,o=e.filteredCourts;return console.log(e),t=o.length<1?r.a.createElement(g.a,{component:"p"},"Select 'Apply Filters' to find your nearest tennis courts."):o.map(function(t){return console.log(e.setActiveCourt),r.a.createElement(Y.a,{item:!0,xs:12,sm:6,lg:3,key:t.properties.id},r.a.createElement(J.a,{className:a.card},r.a.createElement(Se.a,null,r.a.createElement(_e.a,{className:a.media,image:"./images/courts/"+t.properties.id+".jpg",title:"Court"}),r.a.createElement($.a,{className:a.panel},r.a.createElement(g.a,{gutterBottom:!0,variant:"h5",component:"h2"},t.properties.name),r.a.createElement(g.a,{gutterBottom:!0,component:"p"},t.distanceToUser.toFixed(1)," miles away"),r.a.createElement(g.a,{gutterBottom:!0,component:"p"},t.properties.description.substring(0,150),"..."),r.a.createElement(g.a,{gutterBottom:!0,component:"p"},"Numbers of courts: ",t.properties.numOfCourts))),r.a.createElement(K.a,null,r.a.createElement(y.a,{size:"small",color:"primary",component:x.a,to:"/map",onClick:function(){e.setActiveCourt(t)}},"View on Map"),r.a.createElement(xe,{court:t}))))}),r.a.createElement(Y.a,{container:!0,spacing:0,direction:"row",alignItems:"center",justify:"center"},t)})),Me=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(Ne,null)}}]),t}(o.Component),Le=Object(N.b)(function(e){return{courts:e.courts,activeCourt:e.activeCourt,filteredCourts:e.courts.filteredCourts}},function(e){return{setActiveCourt:function(t){e({type:"SET_ACTIVE_COURT",court:t})},addCourts:function(t){e({type:"ADD_COURTS",payload:t})}}})(Me),Be=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(o.Fragment,null,r.a.createElement(Y.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center"},r.a.createElement(Y.a,{item:!0,xs:12},r.a.createElement(Te,null))),r.a.createElement(Y.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center"},r.a.createElement(Le,null)))}}]),t}(o.Component),Pe=a(86),Ve=a.n(Pe),We=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).removeFavourite=function(e){var t=a.state.favouriteCourts.filter(function(t){return t.properties.id!==e});a.setState({favouriteCourts:t}),localStorage.setItem("favouriteCourts",JSON.stringify(t))},a.state={favouriteCourts:JSON.parse(localStorage.getItem("favouriteCourts"))},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t=this,a=this.props.classes,n=this.state.favouriteCourts;return null!=n&&(e=n.map(function(e){return r.a.createElement(_.a,{key:e.properties.id},r.a.createElement(k.a,{primary:e.properties.name,secondary:"No. of courts: "+e.properties.numOfCourts}),r.a.createElement(y.a,{size:"small",color:"primary",component:x.a,to:"/map",onClick:function(){t.props.setActiveCourt(e)}},"View on Map"),r.a.createElement(Ve.a,{className:a.clearBtn},r.a.createElement(ke.a,{"aria-label":"Delete",onClick:function(){t.removeFavourite(e.properties.id)}},r.a.createElement(I.a,null,r.a.createElement(U.a,null,"clear")))))})),r.a.createElement(o.Fragment,null,r.a.createElement(Y.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center"},r.a.createElement(Y.a,{item:!0,xs:12},r.a.createElement(g.a,{variant:"h6",className:a.titleFavourites},"Favourites")),r.a.createElement(Y.a,{item:!0},r.a.createElement(S.a,null,e))))}}]),t}(o.Component),ze=Object(N.b)(function(e){return{courts:e.courts,filteredCourts:e.courts.filteredCourts,activeCourt:e.courts.activeCourt}},function(e){return{setActiveCourt:function(t){e({type:"SET_ACTIVE_COURT",court:t})}}})(Object(m.withStyles)({clearBtn:{position:"absolute",right:"-30px"},titleFavourites:{marginTop:"10px"}})(We)),Ge=Object(m.createMuiTheme)({palette:{primary:{main:"#006064"},secondary:{main:"#43a047"}},typography:{useNextVariants:!0}}),Je=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={showCourtDetails:!1},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){}},{key:"render",value:function(){return r.a.createElement(P.a,null,r.a.createElement(m.MuiThemeProvider,{theme:Ge},r.a.createElement("div",{className:"App"},r.a.createElement(B,null),r.a.createElement(V.a,{exact:!0,path:"/",component:Be}),r.a.createElement(V.a,{exact:!0,path:"/map",render:function(e){return r.a.createElement(re,null)}}),r.a.createElement(V.a,{exact:!0,path:"/favourites",component:ze}))))}}]),t}(o.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var He=a(39),Ke=a(40),Ze={GET_ACTIVE_COURT:"GET_ACTIVE_COURT",SET_ACTIVE_COURT:"SET_ACTIVE_COURT",ADD_COURTS:"ADD_COURTS",FILTER_COURTS:"FILTER_COURTS",UPDATE_FILTERS:"UPDATE_FILTERS",SET_USER_LOCATION:"SET_USER_LOCATION"},$e={courts:[],filteredCourts:[],activeCourt:null,userLocation:[]};var qe={courtCost:"free",courtDistance:1e3};var Qe=Object(He.c)({courts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ze.ADD_COURTS:return console.log(t),Object(Ke.a)({},e,{courts:t.payload});case Ze.FILTER_COURTS:return Object(Ke.a)({},e,{filteredCourts:t.payload});case Ze.SET_ACTIVE_COURT:return console.log(t),console.log(t.court),Object(Ke.a)({},e,{activeCourt:t.court});case Ze.SET_USER_LOCATION:return console.log(t.payload.coords.latitude),console.log(t.payload.coords.longitude),Object(Ke.a)({},e,{userLocation:[t.payload.coords.latitude,t.payload.coords.longitude]});default:return e}},formFilters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ze.UPDATE_FILTERS:return Object(Ke.a)({},e,t.payload);default:return e}}}),Xe=a(151),Ye=Object(He.d)(Qe,Object(He.a)(Xe.a));console.log(Ye.getState()),c.a.render(r.a.createElement(N.a,{store:Ye},r.a.createElement(Je,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[209,2,1]]]);
//# sourceMappingURL=main.1ec5f020.chunk.js.map